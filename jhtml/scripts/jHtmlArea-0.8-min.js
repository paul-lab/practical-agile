(function(f,e){var b=e.$jhtmlarea={};var a=b.browser={};(function(){a.msie=false;a.mozilla=false;a.safari=false;a.version=0;if(navigator.userAgent.match(/MSIE ([0-9]+)\./)){a.msie=true;a.version=parseFloat(RegExp.$1)}else{if(navigator.userAgent.match(/Trident\/([0-9]+)\./)){a.msie=true;a.version=RegExp.$1;if(navigator.userAgent.match(/rv:([0-9]+)\./)){a.version=parseFloat(RegExp.$1)}}}if(navigator.userAgent.match(/Mozilla\/([0-9]+)\./)){a.mozilla=true;if(a.version===0){a.version=parseFloat(RegExp.$1)}}if(navigator.userAgent.match(/Safari ([0-9]+)\./)){a.safari=true;a.version=RegExp.$1;if(navigator.userAgent.match(/Version\/([0-9]+)\./)){if(a.version===0){a.version=parseFloat(RegExp.$1)}}}})();f.fn.htmlarea=function(j){if(j&&typeof(j)==="string"){var g=[];for(var h=1;h<arguments.length;h++){g.push(arguments[h])}var l=c(this[0]);var k=l[j];if(k){return k.apply(l,g)}}return this.each(function(){c(this,j)})};var c=e.jHtmlArea=function(h,g){if(h.jquery){return c(h[0])}if(h.jhtmlareaObject){return h.jhtmlareaObject}else{return new c.fn.init(h,g)}};c.fn=c.prototype={jhtmlarea:"0.8",init:function(m,i){if(m.nodeName.toLowerCase()==="textarea"){var l=f.extend({},c.defaultOptions,i);m.jhtmlareaObject=this;var h=this.textarea=f(m);var g=this.container=f("<div/>").addClass("jHtmlArea").width(h.width()).insertAfter(h);var k=this.toolbar=f("<div/>").addClass("ToolBar").appendTo(g);d.initToolBar.call(this,l);var j=this.iframe=f("<iframe/>").height(h.height());j.width(h.width());var n=this.htmlarea=f("<div/>").append(j);g.append(n).append(h.hide());d.initEditor.call(this,l);d.attachEditorEvents.call(this);j.height(j.height()-k.height());k.width(h.width());if(l.loaded){l.loaded.call(this)}}},dispose:function(){this.textarea.show().insertAfter(this.container);this.container.remove();this.textarea[0].jhtmlareaObject=null},execCommand:function(i,g,k){this.iframe[0].contentWindow.focus();if(a.msie===true&&a.version>=11){if(this.previousRange){var h=this.previousRange;var j=this.getSelection();j.removeAllRanges();j.addRange(h)}}this.editor.execCommand(i,g||false,k||null);this.updateTextArea()},ec:function(h,g,i){this.execCommand(h,g,i)},queryCommandValue:function(g){this.iframe[0].contentWindow.focus();return this.editor.queryCommandValue(g)},qc:function(g){return this.queryCommandValue(g)},getSelectedHTML:function(){if(a.msie){return this.getRange().htmlText}else{var g=this.getRange().cloneContents();return f("<p/>").append(f(g)).html()}},getSelection:function(){if(a.msie===true&&a.version<11){return this.editor.selection}else{return this.iframe[0].contentDocument.defaultView.getSelection()}},getRange:function(){var g=this.getSelection();if(!g){return null}if(g.getRangeAt){if(g.rangeCount>0){return g.getRangeAt(0)}}if(g.createRange){return g.createRange()}return null},html:function(g){if(g!==undefined){this.textarea.val(g);this.updateHtmlArea()}else{return this.toHtmlString()}},pasteHTML:function(g){this.iframe[0].contentWindow.focus();var h=this.getRange();if(a.msie){h.pasteHTML(g)}else{if(a.mozilla){h.deleteContents();h.insertNode(f((g.indexOf("<")!=0)?f("<span/>").append(g):g)[0])}else{h.deleteContents();h.insertNode(f(this.iframe[0].contentWindow.document.createElement("span")).append(f((g.indexOf("<")!=0)?"<span>"+g+"</span>":g))[0])}}h.collapse(false);h.select()},cut:function(){this.ec("cut")},copy:function(){this.ec("copy")},paste:function(){this.ec("paste")},bold:function(){this.ec("bold")},italic:function(){this.ec("italic")},underline:function(){this.ec("underline")},strikeThrough:function(){this.ec("strikethrough")},image:function(g){if(a.msie===true&&!g){this.ec("insertImage",true)}else{this.ec("insertImage",false,(g||prompt("Image URL:","http://")))}},removeFormat:function(){this.ec("removeFormat",false,[]);this.unlink()},link:function(){if(a.msie===true){this.ec("createLink",true)}else{this.ec("createLink",false,prompt("Link URL:","http://"))}},unlink:function(){this.ec("unlink",false,[])},orderedList:function(){this.ec("insertorderedlist")},unorderedList:function(){this.ec("insertunorderedlist")},superscript:function(){this.ec("superscript")},subscript:function(){this.ec("subscript")},p:function(){this.formatBlock("<p>")},h1:function(){this.heading(1)},h2:function(){this.heading(2)},h3:function(){this.heading(3)},h4:function(){this.heading(4)},h5:function(){this.heading(5)},h6:function(){this.heading(6)},heading:function(g){this.formatBlock(a.msie===true?"Heading "+g:"h"+g)},indent:function(){this.ec("indent")},outdent:function(){this.ec("outdent")},insertHorizontalRule:function(){this.ec("insertHorizontalRule",false,"ht")},justifyLeft:function(){this.ec("justifyLeft")},justifyCenter:function(){this.ec("justifyCenter")},justifyRight:function(){this.ec("justifyRight")},increaseFontSize:function(){if(a.msie===true){this.ec("fontSize",false,this.qc("fontSize")+1)}else{if(a.safari){this.getRange().surroundContents(f(this.iframe[0].contentWindow.document.createElement("span")).css("font-size","larger")[0])}else{this.ec("increaseFontSize",false,"big")}}},decreaseFontSize:function(){if(a.msie===true){this.ec("fontSize",false,this.qc("fontSize")-1)}else{if(a.safari){this.getRange().surroundContents(f(this.iframe[0].contentWindow.document.createElement("span")).css("font-size","smaller")[0])}else{this.ec("decreaseFontSize",false,"small")}}},forecolor:function(g){this.ec("foreColor",false,g!==undefined?g:prompt("Enter HTML Color:","#"))},formatBlock:function(g){this.ec("formatblock",false,g||null)},showHTMLView:function(){this.updateTextArea();this.textarea.show();this.htmlarea.hide();f("ul li:not(li:has(a.html))",this.toolbar).hide();f("ul:not(:has(:visible))",this.toolbar).hide();f("ul li a.html",this.toolbar).addClass("highlighted")},hideHTMLView:function(){this.updateHtmlArea();this.textarea.hide();this.htmlarea.show();f("ul",this.toolbar).show();f("ul li",this.toolbar).show().find("a.html").removeClass("highlighted")},toggleHTMLView:function(){(this.textarea.is(":hidden"))?this.showHTMLView():this.hideHTMLView()},toHtmlString:function(){return this.editor.body.innerHTML},toString:function(){return this.editor.body.innerText},updateTextArea:function(){this.textarea.val(this.toHtmlString())},updateHtmlArea:function(){this.editor.body.innerHTML=this.textarea.val()}};c.fn.init.prototype=c.fn;c.defaultOptions={toolbar:[["html"],["bold","italic","underline","strikethrough","|","subscript","superscript"],["increasefontsize","decreasefontsize"],["orderedlist","unorderedlist"],["indent","outdent"],["justifyleft","justifycenter","justifyright"],["link","unlink","image","horizontalrule"],["p","h1","h2","h3","h4","h5","h6"],["cut","copy","paste"]],css:null,toolbarText:{bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strike-Through",cut:"Cut",copy:"Copy",paste:"Paste",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6",p:"Paragraph",indent:"Indent",outdent:"Outdent",horizontalrule:"Insert Horizontal Rule",justifyleft:"Left Justify",justifycenter:"Center Justify",justifyright:"Right Justify",increasefontsize:"Increase Font Size",decreasefontsize:"Decrease Font Size",forecolor:"Text Color",link:"Insert Link",unlink:"Remove Link",image:"Insert Image",orderedlist:"Insert Ordered List",unorderedlist:"Insert Unordered List",subscript:"Subscript",superscript:"Superscript",html:"Show/Hide HTML Source View"}};var d={toolbarButtons:{strikethrough:"strikeThrough",orderedlist:"orderedList",unorderedlist:"unorderedList",horizontalrule:"insertHorizontalRule",justifyleft:"justifyLeft",justifycenter:"justifyCenter",justifyright:"justifyRight",increasefontsize:"increaseFontSize",decreasefontsize:"decreaseFontSize",html:function(g){this.toggleHTMLView()}},initEditor:function(g){var h=this.editor=this.iframe[0].contentWindow.document;h.designMode="on";h.open();h.write(this.textarea.val());h.close();if(g.css){var i=h.createElement("link");i.rel="stylesheet";i.type="text/css";i.href=g.css;h.getElementsByTagName("head")[0].appendChild(i)}},initToolBar:function(g){var k=this;var j=function(m,i,n){return f("<li/>").append(f("<a href='javascript:void(0);'/>").addClass(m).attr("title",i).click(function(){n.call(k,f(this))}))};function l(m){var p=f("<ul/>").appendTo(k.toolbar);for(var o=0;o<m.length;o++){var r=m[o];if((typeof(r)).toLowerCase()==="string"){if(r==="|"){p.append(f('<li class="separator"/>'))}else{var q=(function(s){var i=d.toolbarButtons[s]||s;if((typeof(i)).toLowerCase()==="function"){return function(t){i.call(this,t)}}else{return function(){this[i]();this.editor.body.focus()}}})(r.toLowerCase());var n=g.toolbarText[r.toLowerCase()];p.append(j(r.toLowerCase(),n||r,q))}}else{p.append(j(r.css,r.text,r.action))}}}if(g.toolbar.length!==0&&d.isArray(g.toolbar[0])){for(var h=0;h<g.toolbar.length;h++){l(g.toolbar[h])}}else{l(g.toolbar)}},attachEditorEvents:function(){var h=this;var g=function(){h.updateHtmlArea()};this.textarea.click(g).keyup(g).keydown(g).mousedown(g).blur(g);this.iframe.blur(function(){h.previousRange=h.getRange()});var i=function(){h.updateTextArea()};f(this.editor.body).click(i).keyup(i).keydown(i).mousedown(i).blur(i);f("form").submit(function(){h.toggleHTMLView();h.toggleHTMLView()});if(e.__doPostBack){var j=__doPostBack;e.__doPostBack=function(){if(h){if(h.toggleHTMLView){h.toggleHTMLView();h.toggleHTMLView()}}return j.apply(e,arguments)}}},isArray:function(g){return g&&typeof g==="object"&&typeof g.length==="number"&&typeof g.splice==="function"&&!(g.propertyIsEnumerable("length"))}}})(jQuery,window);